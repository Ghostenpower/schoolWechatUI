<!--pages/order/list/index.wxml-->
<view class="container">
  <view class="order-list">
    <block wx:for="{{orders}}" wx:key="orderId">
      <view class="order-item" bindtap="onTapOrder" data-id="{{item.orderId}}">
        <view class="order-header">
          <view class="task-title">{{item.taskTitle || '未命名任务'}}</view>
          <view class="status-group">
            <view class="task-status">{{item.taskStatusText}}</view>
            <view class="order-status {{item.statusClass}}">
              {{item.orderStatusText}}
            </view>
          </view>
        </view>

        <view class="order-content">
          <view class="info-row">
            <text class="label">取件地点：</text>
            <text class="value">{{item.pickupLocation || '暂无'}}</text>
          </view>
          <view class="info-row">
            <text class="label">送达地点：</text>
            <text class="value">{{item.deliveryLocation || '暂无'}}</text>
          </view>
          <view class="info-row">
            <text class="label">截止时间：</text>
            <text class="value">{{item.deadline || '暂无'}}</text>
          </view>
          <view class="description">{{item.taskDescription || '暂无描述'}}</view>
        </view>

        <view class="order-footer">
          <view class="user-info">
            <image 
              class="avatar" 
              src="{{item.customerAvatarUrl || '/images/default-avatar.png'}}"
              mode="aspectFill"
            />
            <text class="name">{{item.customerName}}</text>
          </view>
          <text class="time">{{item.acceptTime ? '接单时间：' + item.acceptTime : ''}}</text>
        </view>
      </view>
    </block>
  </view>

  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>
  <view class="no-more" wx:if="{{!hasMore && orders.length > 0}}">
    <text>没有更多订单了</text>
  </view>
  <view class="empty" wx:if="{{!loading && orders.length === 0}}">
    <text>暂无订单</text>
  </view>
</view>